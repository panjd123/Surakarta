# 第二阶段报告

## 小组分工

郑子姗：代码框架，棋盘、棋子绘制、挪子逻辑


蔡乐宜：吃子逻辑、显示信息、结束逻辑


张宇衡：整体debug及内容补充、超时及认输判定


## 代码框架

我们使用qpainter类绘制棋盘和棋子，使用mainwindow类来代表和操纵棋子，建立了gamemap数组来帮助判断棋盘信息，使用statusbar类显示信息，以及把原有的Surakarta各个类稍加修改来判断游戏信息。
我们的设计流程如下：
1. 绘制棋盘、棋子
2. 编写基本移子逻辑，包括如何判断鼠标点击、编写移子和吃子规则逻辑，利用原有rule判断该动作是否合法，从而决定是否更新棋盘

  *其中判断鼠标点击的方法如下：我们先用——函数来获取鼠标的位置，然后计算出鼠标和各个点之间的距离，与模糊边界做比较，从而得知鼠标点击的具体格点坐标
   更新棋盘的方法如下：我们维护了一个click和select数组来判断轮到一方下棋时鼠标是第几次点击 鼠标第一次点击的位置为对应要移动的棋子位置坐标，鼠标第二次点的位置为该棋子要移动到的地方，再运用surakarta的判断逻辑来确定移动是否合法，如果合法就通过重画棋盘来更新位置。
   具体代码实现如下：*

3. 编写游戏结束相关逻辑，利用endreason判断游戏是否结束
4. 编写信息条代码，显示游戏轮数以及玩家信息
5. 编写超时、认输结束游戏逻辑代码

游戏分为pvp和pvc两个模式，其中pvc暂未编写；游戏结束后点击pvp即可重启再来一局

## 遇到的问题及解决方法

我们在编写过程中发现有时自行添加的代码逻辑无法和原有的rule和game类契合，因此稍加改动，将原有逻辑与现有代码整合，成功判断了移子和吃子规则。