# Team 1 Surakarta 第二阶段报告
## ———written by RXY

### Part 1. 关于Qt的认知
- #### 一些私货    
    To be honest,在正式接触到Qt之前，我基本没有使用过“类”这个东西
    （~~对我就是喜欢堆shitmountain~~）
    但是在第二阶段开发过程中，我感受到了“封装”的便利性与简洁性（~~尽管偶尔会找不到函数定义~~）
    尤其是在一些信号（和槽函数）的传递的过程中
- #### Qt的优势
    **1.Qt为我们提供了多种实现ui的方式**
    首先，我们组的棋盘以及棋子是直接通过代码手搓实现的（包括设置颜色，划线，提取坐标等）
    其次，我们组的倒计时界面是在.ui文件中通过添加已有的button/textedit而实现的
    **2.Qt本身自带的一些函数或特殊变量对可视化界面具有帮助**
    包括而不限于“SIGNAL”“SLOT”“QObject”“QWidget”等
    同时.ui文件中的button等可以自动在源文件中产生函数框架，只需完善函数框架就可以使得按下按钮就可以实现效果
    **3.Qt的逻辑性比较完整**
    这一点比较主观，大体来讲就是一些基础规范。例如.h声明，.cpp中实现，功能封装，文件交错（让我经常忘记include）
### Part2.第二阶段实现过程
- #### （1）ui实现
  我们组参考了University of B.Station（~~bushi~~）推出的Qt中国象棋视频构建了棋盘及棋子
  完成了initialpiece，surakarta position to qpoint，qpoint to id三个功能
  最后使用自带的Qpainter绘制直线，弧线与棋子
- #### （2）代码移植
  **指的是规则部分**
  鉴于我们在stage1上苦苦耗费几个星期和好多脑细胞，我们必须将rulemanager搬运到Qt中
  原本想法是把代码copy之后用一些类的手段以文件形式直接接入Qt系统，但是由于代码较为紊乱，我们迟迟无法找到切入口，因此我们在widget.cpp中重新实现了一次rule
- #### （3）补充功能实现
    根据panjd123大哥（Orz）的指示，我们需要在本阶段中完成超时判断、认输、remake（）等功能
    - **首先讲讲我们的remake**
    比较简单粗暴，可以类比于代码“goto”的功能，即一旦按下按钮直接初始化棋盘
    - **其次是认输**
    这一点比较容易，因为rule中有一个变量currentplayer（这一点也显示在ui上），按下按钮直接判处当前玩家输了即可
    - **最后是超时**
    我们采用了Qtimer设计了计时器，并在计时器到达0时传输当前玩家超时而输的信号
### Part3 遇见的问题以及分工
  1.我们在开发clock（倒计时）的时候出现了一个“undefined symbol”的错误，但是那个函数已经被声明了，经过长时间无头绪的debug，最后发现需要通过清除并重新构建来解决
  2.没有2（

  分工：
  第二阶段主要负责&Qt框架主要实现：李光毅
  倒计时&教程&markdown：任宣宇