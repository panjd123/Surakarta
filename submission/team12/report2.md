# 第二阶段报告
***
## Part 1 
*报告人*  仇嘉惟
***
我主要负责鼠标和棋盘的交互，鼠标和按钮的交互，输出game_info到窗口，以及计时器（包括暂停和继续的功能）
游戏是数据层和表现层的互动，由表现层的信号改变数据层进而由数据层改变表现层
鼠标和棋盘的交互，主要在于窗口对鼠标位置的监听（mouseMoveEvent）和鼠标点击后棋盘的反应，每当鼠标移动，窗口得到其位置并计算与其最近的棋子的距离，当距离足够小时，窗口在对应棋子上打印一个标记，表示鼠标点击后哪个棋子将被选中。若标记存在且鼠标点击了，则该棋子通过一系列判断确定其为from还是to，若窗口里储存的from和to的选中标记都存在，则调用game.Move(),棋盘数据层改变后使表现层改变
按钮就是设计几个函数和按钮连接，reset是重置game，resign，就是认输，直接让game_info的endreasond改变并进入结算页面，quit就是把窗口关了
输出gameinfo就是创建文本框，每次move后更新
计时器就是俩timer，一个计时算什么时候超时，若move发生则重置，另一个timerForText确定每隔多久刷新一次表现在窗口上的时间，由此通知玩家
那两个计时按钮用于暂停和继续计时，可以让玩家玩着玩着去吃饭和上厕所，是十分人性化的设计（），当计时停止时，不能对棋盘有任何操作，否则直接判负
困难：莫名奇妙的小bug比如结算页面时计时器还在跑，缝缝补补就过去了
未来可能的改进方向：分出其他窗口，不全堆在MainWindow，并且可以让玩家设定超时时间以及PVP还是PVE之类


## Part 2 
*报告人*  朱文彬
***
结束之后：写了个Afterend()函数，确定了winner,endreason。再弹出messbox，显示这些信息，并且问玩家要不要再开一局，如果yes，就重新初始化游戏、重置编辑框等等；如果no, 就关闭窗口。
困难：一开始写在paintevent里面，导致崩溃，然后写到了mousereleaseevent函数就行了。初期，尝试另创一个widget类，把各种函数写到这个类里面，而不是mainwindow，但导致了一些奇怪的现象。索性就全搞在mainwindow上面。后续争取搞懂。

## Part 3
*报告人*  王韵雅
***
棋盘绘制的实现: 主要就是paintevent()函数，绘制基础棋盘，包括棋线（3/4圆、直线）和棋子。在游戏进行中，绘制棋盘的依据是调用game->_board，得到每次棋子的精确状态，每次状态改变后就调用重绘。与此同时，跟随鼠标的移动，画棋子的选中状态和选择标记，优化游戏操作体验。
困难：棋子移动的时候，动效、音效、特效还有待添加，需要用的模块下载过程出现问题。